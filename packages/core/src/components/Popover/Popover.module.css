/* ---------------------------------------------------------------------------
 * Popover — Semantic Layer (Layer 3)
 *
 * Glassmorphism floating panel with radial gradient SVG backgrounds.
 * Wraps PopoverBase.Dropdown with visual styling.
 *
 * DOM structure:
 *   .dropdown  — styled floating element
 *   └── .arrow — CSS triangle arrow (inherits background)
 * --------------------------------------------------------------------------- */

.dropdown {
  background-image:
    url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ1cmwoI3BhaW50MF9yYWRpYWxfNDQ2NF81NTMzOCkiIGZpbGwtb3BhY2l0eT0iMC4xIi8+CjxkZWZzPgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50MF9yYWRpYWxfNDQ2NF81NTMzOCIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAgMS44MTgxMmUtMDUpIHJvdGF0ZSgtNDUpIHNjYWxlKDEyMy4yNSkiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMDBCOEQ5Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwQjhEOSIgc3RvcC1vcGFjaXR5PSIwIi8+CjwvcmFkaWFsR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==),
    url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTIwIiBmaWxsPSJ1cmwoI3BhaW50MF9yYWRpYWxfNDQ2NF81NTMzNykiIGZpbGwtb3BhY2l0eT0iMC4xIi8+CjxkZWZzPgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50MF9yYWRpYWxfNDQ2NF81NTMzNyIgY3g9IjAiIGN5PSIwIiByPSIxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgZ3JhZGllbnRUcmFuc2Zvcm09InRyYW5zbGF0ZSgwIDEyMCkgcm90YXRlKDEzNSkgc2NhbGUoMTIzLjI1KSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRjU2MzAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkY1NjMwIiBzdG9wLW9wYWNpdHk9IjAiLz4KPC9yYWRpYWxHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K);
  background-size: 50%, 50%;
  background-repeat: no-repeat;
  background-position: right top, left bottom;
  backdrop-filter: blur(20px);
  background-color: rgba(var(--prismui-background-paperChannel, 255 255 255) / 90%);
  box-shadow: var(--prismui-shadow-dropdown, 0px 12px 24px -4px rgba(0, 0, 0, 0.12), 0px 0px 2px 0px rgba(0, 0, 0, 0.08));
  border-radius: 10px;
  padding: 16px;
  overflow: inherit;
}

/* ---- Arrow ---- */
/*
 * Arrow styles are based on the ARROW's physical position on the dropdown,
 * which is the INVERSE of the data-position attribute:
 *   data-position="bottom-*" → arrow sits at TOP of dropdown
 *   data-position="top-*"    → arrow sits at BOTTOM of dropdown
 *   data-position="right-*"  → arrow sits at LEFT of dropdown
 *   data-position="left-*"   → arrow sits at RIGHT of dropdown
 */

/* Base: all arrows get paper background + subtle border */
.arrow {
  background-color: var(--prismui-background-paper);
  border: solid 1px rgba(var(--prismui-color-gray-500Channel) / 12%);
}

/* Arrow at top + top-left (data-position: bottom, bottom-start) — base only */
/* Already covered by .arrow base styles */

/* Arrow at top-right (data-position: bottom-end) — info gradient */
.dropdown[data-position='bottom-end'] .arrow {
  background-repeat: no-repeat;
  background-size: 42px 42px;
  background-position: right top;
  background-image: linear-gradient(45deg, rgba(var(--prismui-info-mainChannel) / 8%), rgba(var(--prismui-info-mainChannel) / 8%));
}

/* Arrow at bottom-left (data-position: top-end) — error gradient */
.dropdown[data-position='top-end'] .arrow {
  background-repeat: no-repeat;
  background-size: 42px 42px;
  background-position: left bottom;
  background-image: linear-gradient(45deg, rgba(var(--prismui-error-mainChannel) / 8%), rgba(var(--prismui-error-mainChannel) / 8%));
}

/* Arrow at bottom + bottom-right (data-position: top, top-start) — base only */
/* Already covered by .arrow base styles */

/* Arrow at left-* (data-position: right, right-start, right-end) — error gradient */
.dropdown[data-position='right'] .arrow,
.dropdown[data-position='right-start'] .arrow,
.dropdown[data-position='right-end'] .arrow {
  background-repeat: no-repeat;
  background-size: 42px 42px;
  background-position: left bottom;
  background-image: linear-gradient(45deg, rgba(var(--prismui-error-mainChannel) / 8%), rgba(var(--prismui-error-mainChannel) / 8%));
}

/* Arrow at right-* (data-position: left, left-start, left-end) — info gradient */
.dropdown[data-position='left'] .arrow,
.dropdown[data-position='left-start'] .arrow,
.dropdown[data-position='left-end'] .arrow {
  background-repeat: no-repeat;
  background-size: 42px 42px;
  background-position: right top;
  background-image: linear-gradient(45deg, rgba(var(--prismui-info-mainChannel) / 8%), rgba(var(--prismui-info-mainChannel) / 8%));
}